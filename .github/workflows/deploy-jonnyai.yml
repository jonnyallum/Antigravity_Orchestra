name: Deploy Jonnys Website

on:
    push:
        branches: [main]
        paths:
            - "Clients/jonnyai.website/**"

jobs:
    deploy:
        runs-on: ubuntu-latest

        steps:
            - uses: actions/checkout@v4

            - name: Setup Node.js
              uses: actions/setup-node@v4
              with:
                  node-version: "20"

            - name: Install & Build
              working-directory: Clients/jonnyai.website
              run: |
                  npm ci
                  npm run build

            - name: Deploy to Hostinger
              uses: easingthemes/ssh-deploy@main
              env:
                  SSH_PRIVATE_KEY: ${{ secrets.SSH_PRIVATE_KEY }}
                  ARGS: "-rltgoDzvO"
                  SOURCE: "Clients/jonnyai.website/out/"
                  REMOTE_HOST: ${{ secrets.HOSTINGER_HOST }}
                  REMOTE_USER: ${{ secrets.HOSTINGER_USER }}
                  TARGET: "/home/u384342620/domains/jonnyai.co.uk/public_html"
                  remot_port: ${{ secrets.HOSTINGER_PORT }}
